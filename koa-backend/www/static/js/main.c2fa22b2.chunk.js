(this["webpackJsonpreact-frontend"]=this["webpackJsonpreact-frontend"]||[]).push([[0],{19:function(e,n,t){e.exports=t(28)},24:function(e,n,t){},25:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(9),c=t.n(o),i=(t(24),t(10)),l=t(11),u=t(18),s=t(15),h=t(1),d=t(2);t(25);function m(){var e=Object(h.a)(["\n    margin: 1rem;\n    cursor: pointer;\n    transform: translateX(-110%);\n    padding: 5px;\n    border: 1px solid #ccc;\n    border-radius: 5px;\n    box-shadow: 0 0 3px #ccc;\n    animation: leftIn 0.6s forwards;\n    &:hover {\n        background: #efefef;\n    }\n"]);return m=function(){return e},e}var f=d.a.div(m());function g(e){return r.a.createElement(f,{style:(n=e.id,{animationDelay:"".concat(.1*n,"s")}),onClick:function(){return e.handleClick(e.keyword)}},e.keyword);var n}function v(){var e=Object(h.a)(["\n    max-height: 80vh;\n    margin: 0 2rem;\n    border: 1px solid #ccc;\n    border-radius: 1rem;\n    overflow: auto;\n    & h3 {\n        text-align: center;\n    }\n"]);return v=function(){return e},e}function w(){var e=Object(h.a)(["\n    width: 50%;\n    max-height: 80vh;    \n    margin: 1.5rem 0;\n    position: relative;\n    &::before {\n        content: '';\n        position: absolute;\n        top: -2rem;\n        left: calc(50% - 1rem);\n        border: 1rem solid;\n        border-color: transparent  transparent #ccc transparent;\n    }\n    transition: all 0.6s ease;\n"]);return w=function(){return e},e}var p=d.a.div(w()),b=d.a.div(v());function y(e){var n=function(n){e.setSearchVal(n,(function(){e.handleSearch()})),e.setShowKeyword(!1)},t=e.keywordList.map((function(e,t){return r.a.createElement(g,{keyword:e.keyword,id:t,handleClick:n,key:t})}));return r.a.createElement(p,null,r.a.createElement(b,null,r.a.createElement("h3",null," ",e.header," "),t))}var E=function e(n){var t=n.url,a=n.data,r=e.cache||(e.cache=new Map),o=[];for(var c in a)o.push("".concat(c,"=").concat(encodeURIComponent(a[c])));return t+="?"+o.join("&"),r.has(t)?(console.log("cache: "+t),Promise.resolve(r.get(t))):function(e){var n=e.url;return new Promise((function(e,t){var a=new XMLHttpRequest;a.open("GET",n),a.send(null),a.onreadystatechange=function(){4===a.readyState&&(a.status>=200&&a.status<300||304===a.status?e(a.responseText):t(a.status))}}))}({url:t}).then((function(e){return console.log("get and cache: "+t),r.set(t,e),e}))};function S(){var e=Object(h.a)(["\n    width: 12px;\n    height: 12px;\n    border-radius: 100%;\n    border:2px solid;\n    position: absolute;\n    margin:30px auto;\n    right: 1rem;\n    top: -22px;\n    cursor: pointer;\n    &::before {\n        content: '';\n        content: \"\";\n        transform: rotate(45deg);\n        width:8px;\n        height: 2px;\n        position: absolute;\n        top:13px;\n        left:11px;\n        background-color: black;\n    }\n"]);return S=function(){return e},e}function k(){var e=Object(h.a)(["\n    background:#bdc3c7;\n    display: flex;\n    width: 18rem;\n    margin: 1rem auto;\n    position: relative;\n    padding: 0.5rem;\n    border-radius: 1rem;\n    & input {\n        width:12rem;\n        outline: none;\n        border: none;\n        margin-left: 1rem;\n        background:#bdc3c7;\n    }\n"]);return k=function(){return e},e}var x=d.a.div(k()),O=d.a.div(S());function j(e){return r.a.createElement(x,null,r.a.createElement("input",{onChange:function(n){e.handleChange(n.target.value)},value:e.searchVal}),r.a.createElement(O,{onClick:e.handleSearch}))}function K(){var e=Object(h.a)(["\n    display: flex;\n    justify-content: space-around;\n"]);return K=function(){return e},e}function V(){var e=Object(h.a)(["\n    display: flex;\n    & div {\n        padding: 0.1rem;\n        position: relative;\n        background: #64a9d640;\n        margin:0 1rem;\n    }\n    & div::before {\n        content: '';\n        border: 0.7rem solid;\n        right: -1.4rem;\n        position: absolute;\n        border-color: transparent transparent transparent #64a9d640;\n    }\n"]);return V=function(){return e},e}function C(){var e=Object(h.a)(["\n    margin: 1rem;\n    border-bottom: 1px solid #ccc;\n    padding: 2rem;\n"]);return C=function(){return e},e}var L=d.a.div(C()),P=d.a.div(V()),M=d.a.div(K());function J(e){return r.a.createElement(L,null,r.a.createElement("h2",null,e.item.title),r.a.createElement(P,null,e.item.tags.map((function(e,n){return r.a.createElement("div",{key:n},e)}))),r.a.createElement("p",null,e.item.description),r.a.createElement(M,null,r.a.createElement("div",null,"\u4f5c\u8005: "+e.item.user_name),r.a.createElement("div",null,"\u8bc4\u8bba\u6570: "+e.item.comments_count),r.a.createElement("div",null,"\u53d1\u8868\u4e8e: "+function(e){var n=Date.now()-new Date(e).getTime();return n<3e5?"\u521a\u521a":n>=3e5&&n<36e5?"".concat(Math.floor(n/6e4),"\u5206\u949f\u524d"):n>=36e5&&n<864e5?"".concat(Math.floor(n/36e5),"\u5c0f\u65f6\u524d"):n>=864e5&&n<2592e6?"".concat(Math.floor(n/864e5),"\u5929\u524d"):function(e){var n=function(e){return e=e<10?"0"+e:e},t=new Date(e);return t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())+" "+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())}(e)}(e.item.create_time)),r.a.createElement("a",{href:e.item.link_url},"\u9605\u8bfb\u539f\u6587")))}var X=t(16),D=t(17);function T(){var e=Object(h.a)(["\n    display: flex;\n    transition: all 0.6s ease-in-out;\n"]);return T=function(){return e},e}function F(){var e=Object(h.a)(["\n    width: 16rem;\n    overflow: hidden;\n    border-radius: 2rem;\n"]);return F=function(){return e},e}function N(){var e=Object(h.a)(["\n    align-self: flex-end;\n    & input {\n        width: 2rem;\n        text-align: center;\n        outline: none;\n        height: 2rem;\n        border: none;\n    }\n"]);return N=function(){return e},e}function R(){var e=Object(h.a)(["\n    flex: 0 0 2rem;\n    height: 2rem;\n    text-align: center;\n    line-height: 2rem;\n    cursor: pointer;\n    border-radius: 50%;\n    color: white;\n    margin-right: 0.5rem;\n"]);return R=function(){return e},e}function _(){var e=Object(h.a)(["\n    margin: 0.5rem auto;\n    display: flex;\n    align-items: center;\n    width: 17rem;\n"]);return _=function(){return e},e}var I=d.a.div(_()),W=d.a.div(R()),A=d.a.div(N()),B=d.a.div(F()),H=d.a.div(T());function $(e){var n=Object(a.useState)(0),t=Object(X.a)(n,2),o=t[0],c=t[1],i=Math.ceil(e.total/10);console.log(i);var l={active:{background:"rgba(0,0,0,0.8)"},normal:{background:"rgba(0,0,0,0.3)"}};Object(a.useEffect)((function(){c(0)}),[i]);var u;return r.a.createElement(a.Fragment,null,r.a.createElement(I,null,r.a.createElement(B,null,r.a.createElement(H,{style:o<3?{transform:"translateX(0)"}:{transform:"translateX(-".concat(2.5*(o-3),"rem)")}},(u=i,Object(D.a)(Array(u).keys())).map((function(n,t){return r.a.createElement(W,{style:o===t?l.active:l.normal,key:t,onClick:function(){e.getPage(t),c(t)}},t+1)})))),r.a.createElement(A,null,r.a.createElement("input",{value:o+1,onChange:function(n){/^\d+$/.test(n.target.value)?n.target.value<1||n.target.value>i||(e.getPage(n.target.value-1),c(n.target.value-1)):c(0)},onFocus:function(e){return e.target.select()}}))),r.a.createElement("div",{style:{textAlign:"center"}},"\u5171",i,"\u9875"))}function q(){var e=Object(h.a)(["\n    max-height: 70vh;\n    margin: 0 2rem;\n    overflow: auto;\n"]);return q=function(){return e},e}function G(){var e=Object(h.a)(["\n    width: 50%;\n    max-height: 80vh;\n    overflow: hidden;\n    position: relative;\n    &::before {\n        content: '';\n        width: 20px;\n        height: 80vh;\n        background: white;\n        position: absolute;\n        right: 2rem;\n    }\n"]);return G=function(){return e},e}var U=d.a.div(G()),Y=d.a.div(q());function z(e){return r.a.createElement(U,null,r.a.createElement(Y,null,e.data.map((function(e,n){return r.a.createElement(J,{item:e,key:n})}))),e.data.length?r.a.createElement($,{getPage:e.getPage,total:e.total}):null)}function Q(){var e=Object(h.a)(["display: flex; width: 200%; transition: all 0.6s ease-in-out;height: 80vh;"]);return Q=function(){return e},e}function Z(){var e=Object(h.a)(["width: 100%; overflow:hidden;"]);return Z=function(){return e},e}var ee="http://127.0.0.1:8000",ne={showKeyword:{transform:"translateX(0)"},showResult:{transform:"translateX(-50%)"}},te=d.a.div(Z()),ae=d.a.div(Q()),re=new WebSocket("ws://localhost:3001"),oe=function(e){Object(u.a)(t,e);var n=Object(s.a)(t);function t(e){var a;return Object(i.a)(this,t),(a=n.call(this,e)).setSearchVal=function(e,n){a.setState({searchVal:e},n)},a.setShowKeyword=function(e){a.setState({showKeyword:e})},a.handleChange=function(e){if(a.setState({searchVal:e,showKeyword:!0}),""!==e){console.log("hint: ",e);var n={url:ee+"/sug",data:{keyword:e}};a.debounceSearchKeyword(n)}},a.search=function(e){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;E({url:ee+"/study",data:{keyword:e,offset:n}}).then((function(e){e=JSON.parse(e),console.log(e),a.setState({searchVal:"",result:e,showKeyword:!1})})).catch((function(e){console.log(e)}))}},a.handleSearch=function(){console.log("search : ",a.state.searchVal),a.search(a.state.searchVal)(),a.setState({getPage:a.search(a.state.searchVal)})},a.state={keywordList:[],searchVal:"",result:{},showKeyword:!1,getPage:null,hotList:[]},a.debounceSearchKeyword=function(e,n){var t=null;return function(){var a=this,r=[].slice.call(arguments);t&&clearTimeout(t),t=setTimeout((function(){e.apply(a,r)}),1e3*n)}}((function(e){console.log("send ws"),re.send(JSON.stringify(e.data),(function(e){console.log(e)})),E(e).then((function(e){e=JSON.parse(e),console.log(e),a.setState({keywordList:e.data})})).catch((function(e){console.log(e)}))}),1),re.onmessage=function(e){console.log("receive: "+e);var n=JSON.parse(e.data);a.setState({hotList:n})},a}return Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement(j,{searchVal:this.state.searchVal,handleChange:this.handleChange,handleSearch:this.handleSearch}),r.a.createElement(te,null,r.a.createElement(ae,{style:this.state.showKeyword?ne.showKeyword:ne.showResult},""===this.state.searchVal?r.a.createElement(y,{header:"\u70ed\u95e8\u641c\u7d22",keywordList:this.state.hotList,show:this.state.showKeyword,setSearchVal:this.setSearchVal,setShowKeyword:this.setShowKeyword,handleSearch:this.handleSearch}):r.a.createElement(y,{header:"\u76f8\u5173\u641c\u7d22",keywordList:this.state.keywordList,show:this.state.showKeyword,setSearchVal:this.setSearchVal,setShowKeyword:this.setShowKeyword,handleSearch:this.handleSearch}),r.a.createElement(z,{data:this.state.result.data||[],getPage:this.state.getPage,total:this.state.result.total||0}))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.c2fa22b2.chunk.js.map