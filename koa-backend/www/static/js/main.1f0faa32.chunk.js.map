{"version":3,"sources":["component/KeywordItem.js","component/KeywordList.js","util/util.js","component/Search.js","component/ResultItem.js","component/Pagination.js","component/ResultList.js","App.js","serviceWorker.js","index.js"],"names":["Item","styled","li","KeywordItem","props","style","id","animationDelay","onClick","handleClick","keyword","Container","div","Wrapper","KeywordList","val","setSearchVal","handleSearch","setShowKeyword","list","keywordList","map","v","i","key","header","cacheQuery","url","data","cache","Map","query","push","encodeURIComponent","join","has","console","log","Promise","resolve","get","reject","xhr","XMLHttpRequest","open","send","onreadystatechange","readyState","status","responseText","then","res","set","SearchIcon","Search","onChange","e","handleChange","target","value","searchVal","Tags","Bottom","ResultItem","item","title","tags","description","user_name","comments_count","time","diff","Date","now","getTime","Math","floor","padDate","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","formatDate","timeFormat","create_time","href","link_url","Current","Window","Pagination","useState","page","setPage","totalPage","ceil","total","styles","active","background","normal","useEffect","n","transform","Array","keys","getPage","test","onFocus","select","ul","ResultList","length","PREFIX","showKeyword","showResult","ws","WebSocket","App","cb","setState","option","debounceSearchKeyword","search","offset","JSON","parse","result","catch","err","state","hotList","fun","second","timer","context","this","args","slice","call","arguments","clearTimeout","setTimeout","apply","debounce","stringify","onmessage","message","show","React","Component","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.1f0faa32.chunk.js","sourcesContent":["import React from 'react';\r\nimport styled from 'styled-components';\r\nimport './animate.css';\r\n\r\nconst Item = styled.li`\r\n    margin: 1rem;\r\n    cursor: pointer;\r\n    transform: translateX(-110%);\r\n    padding: 5px;\r\n    border: 1px solid #ccc;\r\n    border-radius: 5px;\r\n    box-shadow: 0 0 3px #ccc;\r\n    list-style: none;\r\n    animation: leftIn 0.6s forwards;\r\n    &:hover {\r\n        background: #efefef;\r\n    }\r\n`\r\n\r\nconst getDelay = (id) => {\r\n    return {\r\n        animationDelay: `${id*0.1}s`\r\n    }\r\n}\r\n\r\nexport default function KeywordItem(props) {\r\n    return (\r\n        <Item style={getDelay(props.id)}\r\n            onClick={() => props.handleClick(props.keyword)}>\r\n            { props.keyword }\r\n        </Item>\r\n    )\r\n}","import React from 'react';\r\nimport KeywordItem from './KeywordItem';\r\nimport styled from 'styled-components';\r\nimport './animate.css';\r\n\r\nconst Container = styled.div`\r\n    width: 50%;\r\n    max-height: 90vh;    \r\n    margin: 1.5rem 0;\r\n    position: relative;\r\n    &::before {\r\n        content: '';\r\n        position: absolute;\r\n        top: -2rem;\r\n        left: calc(50% - 1rem);\r\n        border: 1rem solid;\r\n        border-color: transparent  transparent #ccc transparent;\r\n    }\r\n    transition: all 0.6s ease;\r\n    animation: showUp 1s ease;\r\n`\r\nconst Wrapper = styled.div`\r\n    max-height: 90vh;\r\n    max-width: 50rem;\r\n    margin: 0 auto;\r\n    border: 1px solid #ccc;\r\n    border-radius: 1rem;\r\n    overflow: auto;\r\n    & h3 {\r\n        text-align: center;\r\n    }\r\n`\r\n\r\n\r\nexport default function KeywordList(props) {\r\n    const handleClick = (val)=> {\r\n        props.setSearchVal(val, () => {\r\n            props.handleSearch();\r\n        });\r\n        props.setShowKeyword(false);        \r\n    }\r\n\r\n    const list = props.keywordList.map((v, i) => <KeywordItem keyword={v.keyword} id={i} handleClick={handleClick} key={i}></KeywordItem>)\r\n    return (\r\n        <Container>\r\n\r\n            <Wrapper>\r\n                <h3> { props.header } </h3>\r\n                \r\n                { list }\r\n            </Wrapper>\r\n        </Container>\r\n    )\r\n\r\n}\r\n","\r\n// handle get\r\nconst get = function({url}) {\r\n    return new Promise((resolve, reject) => {\r\n        let xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url);\r\n        xhr.send(null);\r\n        xhr.onreadystatechange = function() {\r\n            if (xhr.readyState === 4) {\r\n                if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304) {\r\n                    resolve(xhr.responseText);\r\n                } else {\r\n                    reject(xhr.status);\r\n                }\r\n            }\r\n        }\r\n    })\r\n}\r\n// cached get\r\nconst cacheQuery = function({url, data}) {\r\n    const cache = cacheQuery.cache || (cacheQuery.cache = new Map());\r\n    let query = [];\r\n    for (let key in data) {\r\n        query.push(`${key}=${encodeURIComponent(data[key])}`);\r\n    }\r\n    url += '?' + query.join('&');\r\n    if (cache.has(url)) {\r\n        console.log('cache: ' + url);\r\n        return Promise.resolve(cache.get(url));\r\n    }\r\n    return get({url}).then(\r\n        res => {\r\n            console.log('get and cache: ' + url);\r\n            cache.set(url, res);\r\n            return res;\r\n        }\r\n    )\r\n}\r\n\r\nconst debounce = function(fun, second) {\r\n    let timer = null;\r\n    return function() {\r\n        let context = this;\r\n        let args = [].slice.call(arguments);\r\n        if (timer) clearTimeout(timer);\r\n        timer = setTimeout(() => {\r\n            fun.apply(context, args)\r\n        }, second*1000);\r\n    }\r\n}\r\n\r\nconst timeFormat = (time) => {\r\n    let now = Date.now();\r\n    let prev = new Date(time);\r\n    let diff = now - prev.getTime();\r\n\r\n    let formatDate = function (val) {\r\n        const padDate = function(val) {\r\n            val = val < 10 ? '0' + val : val;\r\n            return val;\r\n        }\r\n        let value=new Date(val);\r\n        let year=value.getFullYear();\r\n        let month=padDate(value.getMonth()+1);\r\n        let day=padDate(value.getDate());\r\n        let hour=padDate(value.getHours());\r\n        let minutes=padDate(value.getMinutes());\r\n        let seconds=padDate(value.getSeconds());\r\n        return year+'-'+month+'-'+day+' '+hour+':'+minutes+':'+seconds;\r\n    }\r\n\r\n    if (diff < 1000 * 60 * 5) {\r\n        return '刚刚';\r\n    } else if (diff >= 1000 * 60 * 5 && diff < 1000 * 60 * 60) {\r\n        return `${Math.floor(diff / (1000 * 60))}分钟前`;\r\n    } else if (diff >= 1000 * 60 * 60 && diff < 1000 * 60 * 60 * 24) {\r\n        return `${Math.floor(diff / (1000 * 60 * 60))}小时前`;\r\n    } else if (diff >= 1000 * 60 * 60 * 24 && diff < 1000 * 60 * 60 * 24 * 30) {\r\n        return `${Math.floor(diff / (1000 * 60 * 60 * 24))}天前`;\r\n    } else {\r\n        return formatDate(time);\r\n    }\r\n\r\n}\r\n\r\nexport { cacheQuery, debounce, timeFormat };","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport './animate.css';\r\n\r\nconst Container = styled.div`\r\n    background:#bdc3c7;\r\n    display: flex;\r\n    width: 18rem;\r\n    margin: 1rem auto;\r\n    position: relative;\r\n    padding: 0.5rem;\r\n    border-radius: 1rem;\r\n    & input {\r\n        width:12rem;\r\n        outline: none;\r\n        border: none;\r\n        margin-left: 1rem;\r\n        background:#bdc3c7;\r\n    }\r\n    animation: bounceIn 2s ease;\r\n`\r\n\r\nconst SearchIcon = styled.div`\r\n    width: 12px;\r\n    height: 12px;\r\n    border-radius: 100%;\r\n    border:2px solid;\r\n    position: absolute;\r\n    margin:30px auto;\r\n    right: 1rem;\r\n    top: -22px;\r\n    cursor: pointer;\r\n    &::before {\r\n        content: '';\r\n        content: \"\";\r\n        transform: rotate(45deg);\r\n        width:8px;\r\n        height: 2px;\r\n        position: absolute;\r\n        top:13px;\r\n        left:11px;\r\n        background-color: black;\r\n    }\r\n`\r\nexport default function Search(props) {\r\n    \r\n    return (\r\n        <Container>\r\n            <input \r\n                onChange={(e) => {props.handleChange(e.target.value)}}\r\n                value={props.searchVal} ></input>\r\n            <SearchIcon onClick={ props.handleSearch }></SearchIcon>\r\n        </Container>\r\n        \r\n    )\r\n}","import React from 'react';\r\nimport styled from 'styled-components';\r\nimport { timeFormat } from '../util/util';\r\n\r\nconst Item = styled.li`\r\n    margin: 1rem;\r\n    border-bottom: 1px solid #ccc;\r\n    padding: 2rem;\r\n    list-style: none;\r\n    @media (max-width: 600px) {\r\n        & {\r\n            padding: 0;\r\n        }\r\n    }\r\n`\r\nconst Tags = styled.div`\r\n    display: flex;\r\n    & div {\r\n        padding: 0.1rem;\r\n        position: relative;\r\n        background: #64a9d640;\r\n        margin:0 1rem;\r\n    }\r\n    & div::before {\r\n        content: '';\r\n        border: 0.7rem solid;\r\n        right: -1.4rem;\r\n        position: absolute;\r\n        border-color: transparent transparent transparent #64a9d640;\r\n    }\r\n`\r\nconst Bottom = styled.div`\r\n    display: flex;\r\n    justify-content: space-around;\r\n    @media (max-width: 600px) {\r\n        & {\r\n            display: none;\r\n        }\r\n    }\r\n`\r\n\r\nexport default function ResultItem(props) {\r\n    return (\r\n        <Item>\r\n            <h2>\r\n                {props.item.title}\r\n            </h2>\r\n            <Tags>\r\n                {props.item.tags.map((v, i) => <div key={i}>{v}</div>)}\r\n            </Tags>\r\n            <p>\r\n                {props.item.description}\r\n            </p>\r\n            <Bottom>\r\n                <div>{'作者: ' + props.item.user_name}</div>\r\n                <div>{'评论数: ' + props.item.comments_count}</div>\r\n                <div>{'发表于: ' + timeFormat(props.item.create_time)}</div>\r\n                <a href={props.item.link_url}>阅读原文</a>\r\n            </Bottom>\r\n        </Item>\r\n    )\r\n}","import React, {useState, Fragment, useEffect} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nconst Container = styled.div`\r\n    margin: 0.5rem auto;\r\n    display: flex;\r\n    align-items: center;\r\n    width: 17rem;\r\n`\r\n\r\nconst Item = styled.div`\r\n    flex: 0 0 2rem;\r\n    height: 2rem;\r\n    text-align: center;\r\n    line-height: 2rem;\r\n    cursor: pointer;\r\n    border-radius: 50%;\r\n    color: white;\r\n    margin-right: 0.5rem;\r\n`\r\n\r\nconst Current = styled.div`\r\n    align-self: flex-end;\r\n    & input {\r\n        width: 2rem;\r\n        text-align: center;\r\n        outline: none;\r\n        height: 2rem;\r\n        border: none;\r\n    }\r\n`\r\nconst Window = styled.div`\r\n    width: 16rem;\r\n    overflow: hidden;\r\n    border-radius: 2rem;\r\n`\r\n\r\nconst Wrapper = styled.div`\r\n    display: flex;\r\n    transition: all 0.6s ease-in-out;\r\n`\r\n\r\nconst range = (n) => [...Array(n).keys()]\r\n\r\n// 调用父组件的handleSearch函数时需要重新初始化\r\nexport default function Pagination(props) {\r\n    let [page, setPage] = useState(0);\r\n    const totalPage = Math.ceil(props.total/10);\r\n    console.log(totalPage);\r\n    const styles = {\r\n        active: {\r\n            background: 'rgba(0,0,0,0.8)'\r\n        },\r\n        normal: {\r\n            background: 'rgba(0,0,0,0.3)'\r\n        }\r\n    }\r\n    \r\n    useEffect(() => {\r\n        setPage(0);\r\n    }, [totalPage])\r\n\r\n    const getPos = () => {\r\n        if (page < 3) {\r\n            return {\r\n                transform: `translateX(0)`\r\n            }\r\n        }\r\n        return {\r\n            transform: `translateX(-${(page-3)*2.5}rem)`\r\n        }\r\n    }\r\n\r\n    return (\r\n        <Fragment>\r\n            <Container>\r\n                <Window>\r\n                    <Wrapper style={getPos()}>\r\n                        { range(totalPage).map((v, i) => \r\n                        <Item style={page === i ? styles.active : styles.normal} \r\n                            key={i} \r\n                            onClick={() => {props.getPage(i); setPage(i)}}\r\n                        >\r\n                            {i + 1}\r\n                        </Item>) }\r\n                    </Wrapper>\r\n                </Window>\r\n                <Current>\r\n                    <input value={page + 1} \r\n                    onChange={(e) => {\r\n                        if(!/^\\d+$/.test(e.target.value)) {\r\n                            setPage(0); \r\n                            return;\r\n                        }\r\n                        if (e.target.value < 1 || e.target.value > totalPage) return;\r\n                        props.getPage(e.target.value - 1); \r\n                        setPage(e.target.value - 1);}}\r\n                    onFocus={(e) => e.target.select()} \r\n                    />\r\n                </Current>\r\n            </Container>\r\n            <div style={{'textAlign': 'center'}}>共{totalPage}页</div>\r\n        </Fragment>\r\n    )\r\n}\r\n","import React from 'react';\r\nimport ResultItem from './ResultItem';\r\nimport styled from 'styled-components';\r\nimport Pagination from './Pagination';\r\n\r\nconst Container = styled.div`\r\n    width: 50%;\r\n    max-height: 90vh;\r\n    overflow: hidden;\r\n    position: relative;\r\n`\r\nconst Wrapper = styled.ul`\r\n    list-style: none;\r\n    max-height: 80vh;\r\n    max-width: 50rem;\r\n    margin: 0 auto;\r\n    overflow: auto;\r\n    padding: 0;\r\n`\r\n\r\n\r\n\r\nexport default function ResultList(props) {\r\n    return (\r\n        <Container>\r\n            <Wrapper>\r\n                {props.data.map((v, i) => <ResultItem item={v} key={i}></ResultItem>)}\r\n            </Wrapper>\r\n            {props.data.length ? <Pagination getPage={props.getPage} total={props.total}></Pagination> : null}\r\n            \r\n        </Container>\r\n    )\r\n}","import React, {Fragment} from 'react';\nimport KeywordList from './component/KeywordList';\nimport { cacheQuery, debounce } from './util/util';\nimport Search from './component/Search';\nimport ResultList from './component/ResultList';\nimport styled from 'styled-components';\n\nconst PREFIX = 'http://localhost:8000';\n\nconst styles = {\n  showKeyword: {\n    transform: 'translateX(0)',\n  },\n  showResult: {\n    transform: 'translateX(-50%)'\n  }\n}\n\nconst Container = styled.div`width: 100%; overflow:hidden;`;\nconst Wrapper = styled.div`display: flex; width: 200%; transition: all 0.6s ease-in-out;height: 90vh;`\n\nlet ws = new WebSocket('ws://localhost:3001');\n\nclass App extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            keywordList: [],\n            searchVal: '',\n            result: {},\n            showKeyword: false,\n            getPage: null,\n            hotList: []\n        }\n        this.debounceSearchKeyword = debounce((option) => {\n            cacheQuery(option)\n            .then(res => {\n                res = JSON.parse(res);\n                if (res.data.length > 0) {\n                    console.log('send ws');\n                    ws.send(JSON.stringify(option.data), (err) => {\n                        console.log(err);\n                    });\n                }\n                console.log(res);\n                this.setState({\n                    keywordList: res.data\n                })\n            })\n            .catch(err => {\n                console.log(err);\n            })\n        }, 1);\n        ws.onmessage = (message) => {\n            console.log('receive: ' + message);\n            let list = JSON.parse(message.data);\n            this.setState({hotList: list});\n        }\n    }\n    setSearchVal = (val, cb) =>{\n        this.setState({searchVal: val}, cb);\n        \n    }\n\n    setShowKeyword = (val) =>{\n        this.setState({showKeyword: val});\n    }\n\n\n    handleChange = (val) =>{\n        this.setState({\n            searchVal: val,\n            showKeyword: true\n        })\n\n        if (val === '') return;\n        console.log('hint: ', val);\n        let option = {\n            url:PREFIX + '/sug', \n            data: {keyword:val}\n        }\n        this.debounceSearchKeyword(option);\n    }\n\n    search= (keyword) => (offset=0) =>{\n        cacheQuery({\n            url:PREFIX + '/study', \n            data: {keyword, offset}\n        })\n        .then(res => {\n            res = JSON.parse(res);\n            console.log(res);\n            this.setState({\n                searchVal: '',\n                result: res,\n                showKeyword: false\n            })\n        })\n        .catch(err => {\n            console.log(err);\n        })\n    }\n    handleSearch = () => {\n        console.log('search : ', this.state.searchVal);\n        this.search(this.state.searchVal)();\n        // curry function\n        this.setState({getPage: this.search(this.state.searchVal)});\n    }\n    render() {\n        return (\n            <Fragment>\n                <Search \n                searchVal={this.state.searchVal}\n                handleChange={this.handleChange}\n                handleSearch={this.handleSearch}\n                ></Search>\n                <Container>\n                  <Wrapper style={this.state.showKeyword ? styles.showKeyword : styles.showResult}>\n                      {\n                      this.state.searchVal === '' \n\n                      ? \n\n                        <KeywordList \n                            header={'热门搜索'}\n                            keywordList={this.state.hotList} \n                            show={this.state.showKeyword} \n                            setSearchVal={this.setSearchVal}\n                            setShowKeyword={this.setShowKeyword}\n                            handleSearch={this.handleSearch}>\n                        </KeywordList>\n\n                      :\n                        <KeywordList \n                            header={'相关搜索'}\n                            keywordList={this.state.keywordList} \n                            show={this.state.showKeyword} \n                            setSearchVal={this.setSearchVal}\n                            setShowKeyword={this.setShowKeyword}\n                            handleSearch={this.handleSearch}>\n                        </KeywordList>\n                      }\n                    \n                    <ResultList \n                        data={this.state.result.data || []} \n                        getPage={this.state.getPage} \n                        total={this.state.result.total || 0}>\n                    </ResultList>\n                  </Wrapper>\n                </Container>\n            </Fragment>\n        )\n    }\n}\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}